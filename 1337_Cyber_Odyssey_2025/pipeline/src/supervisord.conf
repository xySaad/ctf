[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
user=root
loglevel=info

[program:app]
directory=/srv/app
command=node --max-old-space-size=128 src/server.js
autostart=true
autorestart=true
startretries=3
startsecs=3
stopasgroup=true
killasgroup=true
stderr_logfile=/var/log/app.err.log
stdout_logfile=/var/log/app.out.log
environment=NODE_ENV="production",PORT="3000",NODE_OPTIONS="--max-old-space-size=128"

[program:proxy]
directory=/srv/proxy
command=node --max-old-space-size=64 server.js
autostart=true
autorestart=true
startretries=3
startsecs=3
stopasgroup=true
killasgroup=true
stderr_logfile=/var/log/proxy.err.log
stdout_logfile=/var/log/proxy.out.log
environment=NODE_ENV="production",NODE_OPTIONS="--max-old-space-size=64"
